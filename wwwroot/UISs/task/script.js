export async function taskUIS() {
    const isDebug = document.URL.includes("localhost")
    if(isDebug) console.log("Is DEBUG")

    const urlSrplit = document.URL.split('/')
    let id = 1
    if (urlSrplit.length > 4) id = parseInt(urlSrplit[4]);

    let headerBox = new HeaderBox("")
    headerBox.initial_title("4A")
    headerBox.push(document.getElementsByTagName("body")[0], "afterbegin");
    headerBox.push_menu_btn({ icon: headerBox.UrlContent + "/resume-icon", alt: "resume icon", url: "https://git.rt.ink/resume.pdf" });
    headerBox.push_menu_btn({ icon: headerBox.UrlContent + "/telegram-icon", alt: "email icon", url: "https://t.me/gitrtink_bot" });
    headerBox.push_menu_btn({ icon: headerBox.UrlContent + "/email-icon-64", alt: "email icon", url: "mailto:rtink.git@gmail.com" });

    let lastVerticalId = headerBox.Id

    document.getElementById(lastVerticalId).insertAdjacentHTML("afterend", "<main></main>")

    let practice = `Опциональное задание. 1. Установить MS SQL Express Edition 2. Cоздать БД . Например список книг в домашней библиотеке: Название, автор, год издания, … другие поля, оглавление в виде xml поля. Оглавление в виде xml файла. 3. Создать хранимые процедуры для insert, update, delete, select … 4. Создать 2 типа проектов в MS Visual Studio: MVC, WEB-Forms 5. Для каждого реализовать карточку, список, функции редактирования, создания, изменения, просмотра записей с помощью хранимых процедур. 6. Также в карточке сделать форму для редактирования оглавления в виде HTML редактора (можно найти контрол в интернете), сохранять содержимое в xml поле. 7. Реализовать примеры выборки данных из xml.`

    const tasklist = new Map([
        [1, { title:"TASK: SELECT", task: "Есть две таблицы: Т1 (ID int, Text1 …., text2 …. B и т.д.) И Т2 (ID int, Text1 …., text2 …. B и т.д.). Написать SELECT: Вывести все поля из обеих таблиц, вывести записи при условии, что ID обеих таблиц совпадают.", answer: "", slideUrl: "/UISs/task/content/Test4a-1.png", attachedFile: "/sql/Test4a-1.sql" }],
        [2, { title:"TASK: SELECT", task: "Есть две таблицы: Т1 (ID int, Text1 …., text2 …. B и т.д.) И Т2 (ID int, Text1 …., text2 …. B и т.д.). Написать SELECT: Вывести все поля из обеих таблиц, вывести все записи из T1 и только имеющиеся в T2", answer: "", slideUrl: "/UISs/task/content/Test4a-2.png", attachedFile: "/sql/Test4a-2.sql" }],
        [3, { title:"TASK: SELECT", task: "Есть две таблицы: Т1 (ID int, Text1 …., text2 …. B и т.д.) И Т2 (ID int, Text1 …., text2 …. B и т.д.). Написать SELECT: Вывести все записи из T1, при условии, что таких ID нет в T2", answer: "", slideUrl: "/UISs/task/content/Test4a-3.png", attachedFile: "/sql/Test4a-3.sql" }],
        [4, { title:"TASK: SELECT XML", task: "Как вывести результат запроса в XML? Написать запрос, выводящий данные в XML. Пусть есть таблица T со следующим видом и содержанием. Что вернет SQL запрос? Написать запрос, выводящий данные в XML.", answer: "", slideUrl: "/UISs/task/content/Test4a-4.png", attachedFile: "/sql/Test4a-4.sql" }],
        [5, { title:"TASK: SELECT XML", task: "Как выбрать данные из поля с XML? Написать запрос, выбирающий данные из XML из предыдущего вопроса. Отфильтровать данные по StatusId != 3", answer: "", slideUrl: "/UISs/task/content/5.png", slideUrl: "/UISs/task/content/Test4a-5.png", attachedFile: "/sql/Test4a-5.sql" }],
        [6, { title:"TASK: SQL", task: "Что такое hints?", answer: "SQL Hints (подсказки) - это специальные инструкции, которые добавляются в SQL-запросы, чтобы влиять на способ выполнения запроса оптимизатором запросов СУБД. Они позволяют разработчику явно указать базе данных, как лучше выполнить запрос, когда оптимизатор может выбрать неоптимальный план выполнения. Example: /*+ ALL_ROWS */" }],
        [7, { title:"TASK: SQL", task: "Какие виды блокировок существуют?", answer: "По уровню изоляции (Блокировка строки (Row-level lock), Блокировка страницы (Page-level lock), Блокировка таблицы (Table-level lock), Блокировка базы данных (Database-level lock)), По типу блокировки (Shared Lock (S), Exclusive Lock (X), Update Lock (U), Intent Locks (IS, IX, SIX), Schema Lock), По длительности (Автоматические (временные), Удерживаемые вручную), По режиму доступа (Совместимые блокировки, Несовместимые блокировки)" }],
        [8, { title:"TASK: SQL", task: "Что такое транзакция?", answer: "Транзакция в SQL — это логическая единица работы, которая состоит из одного или нескольких SQL-операторов и выполняется как одно целое. Она гарантирует, что все операции внутри неё выполнятся полностью или не будут выполнены вовсе." }],
        [9, { title:"TASK: SQL", task: "Чем delete … от truncate … отличается?", answer: "DELETE удаляет строки по одной, может использовать условия, срабатывают триггеры и изменения можно откатить; TRUNCATE быстро удаляет все данные из таблицы без условий, не вызывает триггеры, сбрасывает счётчик ID и работает быстрее, но не даёт гибкости." }],
        [10, { title:"TASK: STORED PROCEDURE", task: "НАПИШИТЕ ХРАНИМУЮ ПРОЦЕДУРУ. Есть база данных в банке. В базе данных есть таблица со счетами (назовем её для простоты T). В таблице T есть среди прочих поля: N - Номер счета, S - сумма на счете. Требуется: Написать хранимую процедуру на языке SQL, которая: Принимает в качестве аргументов параметры: @N1 - номер первого счета, @N2 - номер второго счета, @S - сумма денежных средств. Переводит сумму @S с первого на второй счет, при это проверяя, достаточно ли средств на первом счете, Использует транзакцию при переводе с первого на второй счет (показать, как работают транзакции).", answer: "Хранимую процедуру можно посмотреть нажав на прикрепоенный файл", slideUrl: "/UISs/task/content/Test4a-10.png", attachedFile: "/sql/Test4a-10.sql" }],
        [11, { title:"TASK: SELECT XML", task: "Пусть есть таблица Purchase со следующим видом и содержанием. Что вернет SQL запрос? SELECT Id, Code, Name, StatusId FROM Purchase FOR XML path('row'), ROOT(&#39;data&#39;)", answer: "", slideUrl: "/sql/Test4a-11.png" }],
        [12, { title:"TASK: DIAGNOSTICS", task: "ЗАДАЧА НА ДИАГНОСТИКУ ПРОБЛЕМЫ. Есть автоматическое задание (task), которое выполняется каждую минуту. Таск регистрирует электронный документ «Результаты торгов». При регистрации документа возможно изменить атрибуты записи в БД. Таск также определяется SQL запросом, который, собственно, и выбирает лоты, по которым надо сформировать этот документ. Вот пример этого SQL: SELECT Bid.Id, Purchase.OrgBuId, Purchase.TypeId FROM Bid JOIN Purchase ON Purchase.Id = Bid.PurchaseId WHERE Bid.StatusId = 6. Ситуация: вечером был перенос этого таска с тестового на боевой сервер. На следующий день вы приходите с утра и видите, что по всем подходящим лотам всю ночь каждую минуту формировался этот документ. Вопрос: почему так произошло и что надо исправить?", answer: "Такое поведение — когда за ночь на боевом сервере каждую минуту формируется новый документ по одним и тем же лотам — обычно связано с тем, что логика таска не учитывает факт уже созданного документа для данного лота. То есть SQL-запрос выбирает лоты по условию Bid.StatusId = 6 без дополнительной проверки, был ли для этого лота уже сформирован документ «Результаты торгов». В результате таск каждый запуск находит эти лоты и повторно создаёт документы." }],
        [13, { title:"TASK: XML VALIDATION", task: "Задача на валидность XML. Перед вами пример XML файла, но он не пройдет валидацию. Найдите все ошибки.", answer: "1. Конкурс с ценой &lt; 500 000 руб. - нужно экранировать < с помощью & lt; 2. <TypeInfo><TypeName>Конкурс</TypeInfo></TypeName> - нарушен порядок закрытия. 3. </Purchaseinfo> - Ошибка в регистре тега, должно быть </PurchaseInfo> 4. Незакрытый тег <BidCurrency> 5. <BuId AccessByOrganization=1> - Некорректный атрибут без кавычек 6. Незакрытый тег <RequestNo> 777. Помимо перечисленных ошибок, в представленном XML отсутствует единый корневой элемент (root element)", slideUrl: "/UISs/task/content/Test4a-13.png" }],
        [14, { title:"TASK: CSHARP", task: "Поиск дублей в массиве. Дано: Есть массив M с типом int32, в массиве N элементов. N – очень много. Есть комп. с неограниченным объемом памяти. Память можно использовать любым образом. Вопрос: Циклом за один проход по массиву определить имеются ли в нем повторяющиеся элементы. Написать алгоритм или рассказать идею, как решить. ", answer: "", slideUrl: "/sql/Test4a-14.png" }],
        [15, { title:"TASK: MATH", task: "ИНЖЕНЕРИЯ И ОБРАБОТКА ИНФОРМАЦИИ. Экономика: Есть 2 формы налогообложения: Налог платится в размере 6% налогов от доходов. Налог платится в размере 15% от разницы (доходы – расходы). Вопрос: при каком уровне расходов (в % от доходов) эти две системы эквивалентны по выплате налогов", answer: "60%" }],
        [16, { title:"TASK: MATH", task: "Инженерная задача. Есть 2 столба, между ними висит провод длиной 184,2 метра. От нижней точки висящего провода до земли 7,9 метра. Высота столбов 100 метров. Вопрос: Каково расстояние между столбами?", answer: "Расстояние между столбами очень маленькое — примерно несколько метров (около 10–15 м или меньше), то есть провод практически свисает вертикально с высоты 100 м и почти касается земли (7,9 м до земли — очень низко)." }],
        [17, { title:"TASK: DOC", task: "Как устроена система государственных закупок в Российской федерации?", answer: "Система государственных закупок в Российской Федерации — это совокупность правовых, организационных и технических механизмов, направленных на обеспечение государственных и муниципальных нужд в товарах, работах и услугах за счёт бюджетных средств, и регулируется Федеральным законом № 44-ФЗ «О контрактной системе». Она начинается с этапа планирования, когда заказчики формируют планы-графики закупок в соответствии с бюджетом и реальными потребностями. Далее осуществляется выбор способа закупки — преимущественно это конкурентные процедуры, такие как электронные аукционы, конкурсы, запросы котировок и предложений, проводимые через утверждённые государством электронные торговые площадки (например, РТС-тендер, Сбербанк-АСТ и другие). Все действия сопровождаются публикацией информации в Единой информационной системе (ЕИС) на сайте zakupki.gov.ru, включая документацию, протоколы, проекты контрактов и результаты. После выбора победителя заключается контракт, который обязателен к исполнению в соответствии с условиями закупки, под контролем заказчика и при необходимости — государственных органов (например, ФАС, Казначейства, Счётной палаты). Система также предусматривает возможность обжалования действий заказчиков и проведения проверок, а её принципы основаны на прозрачности, открытости, равноправии участников, обоснованности закупок и предотвращении коррупции, что делает её важнейшим инструментом в управлении государственными финансами." }],
        [18, { title:"TASK: DOC", task: "Что регулирует 44 ФЗ?", answer: "Федеральный закон № 44-ФЗ в России регулирует контрактную систему в сфере закупок товаров, работ и услуг для обеспечения государственных и муниципальных нужд. Он устанавливает правила, по которым государственные и муниципальные заказчики проводят закупки, начиная от планирования и выбора поставщика до заключения, исполнения и контроля контрактов. Цель закона — обеспечить открытость, прозрачность, эффективность и честную конкуренцию при расходовании бюджетных средств." }],
        [19, { title:"TASK: DOC", task: "Что регулирует 223 ФЗ?", answer: "Федеральный закон № 223-ФЗ регулирует закупочную деятельность отдельных видов юридических лиц — прежде всего государственных и муниципальных предприятий, госкорпораций, а также компаний с государственным участием. Полное название закона — «О закупках товаров, работ, услуг отдельными видами юридических лиц», и его цель — обеспечить прозрачность и эффективность закупок при более гибком регулировании по сравнению с 44-ФЗ. В отличие от жёстко регламентированной контрактной системы по 44-ФЗ, 223-ФЗ предоставляет заказчикам больше свободы: они самостоятельно разрабатывают и публикуют свои положения о закупках, определяют способы закупок, критерии отбора и сроки. Однако они обязаны соблюдать базовые требования к открытости и недискриминации участников, публиковать закупки в Единой информационной системе (ЕИС) и обеспечивать доступ к информации о процедурах и контрактах. Закон применяется, например, к таким организациям, как РЖД, Газпром, Росатом и др." }],
        [20, { title:"TASK: DOC", task: "Что такое «B to B»?", answer: "«B to B» (Business-to-Business, или B2B) — это модель взаимодействия, при которой бизнес продаёт товары или услуги другим бизнесам, а не конечным потребителям. То есть компании выступают и продавцами, и покупателями, например, производитель поставляет сырьё заводу, а оптовый поставщик продаёт товары розничным магазинам. В B2B обычно сделки крупнее, процесс покупки более формализован и длителен, а отношения строятся на долгосрочном сотрудничестве." }],
        [21, {title:"TASK: SCHEME", task: "Привести пример бизнеса процесса, нарисовать схему бизнес-процесса.", answer: "Бизнес-процесс: поставка мёда государству через тендер (с учётом 44-ФЗ) 1. Мониторинг государственных закупок — магазин регулярно отслеживает размещённые на официальных площадках закупки (ЕИС) в соответствии с 44-ФЗ, выбирает тендеры на поставку мёда с нужным ассортиментом. 2. Подготовка тендерной документации и заявки — в полном соответствии с требованиями закупочной документации готовится предложение с указанием ассортимента, цен и подтверждающих документов (сертификаты качества, лицензии). 3. Подача заявки на участие в электронном аукционе или конкурсе — заявка подаётся через официальную площадку в установленные сроки, соблюдаются все условия 44-ФЗ по форме и содержанию. 4. Участие в процедуре закупки и ожидание итогов — после подачи заявки проводится рассмотрение и оценка предложений заказчиком, соблюдаются сроки и требования к раскрытию информации. 5. Заключение государственного контракта — при победе в тендере подписывается контракт с государственным заказчиком, в контракте фиксируются ассортимент мёда, сроки поставки, качество и цена. 6. Выполнение обязательств по поставке — магазин формирует и поставляет мёд согласно условиям контракта, включая соблюдение стандартов качества и комплектности. 7. Оформление и передача сопроводительных документов — вместе с поставкой передаются все обязательные документы (товарные накладные, сертификаты, акты приёма-передачи). 8. Приемка и контроль со стороны заказчика — заказчик проверяет качество и количество поставленного мёда в соответствии с условиями контракта и 44-ФЗ. 9. Оплата по контракту — после успешной приемки заказчик производит оплату в сроки, установленные законодательством и договором. 10. Отчётность и контроль исполнения — магазин ведёт необходимую отчётность и готовится к возможным проверкам (финансовым, контролирующим органам) в соответствии с требованиями 44-ФЗ.", slideUrl: "/UISs/task/content/Test4a-21.png" }],
        [22, {title:"TASK: PRACTICE", task: practice, answer: "Жмите NEXT. Реализовал текущее задание, используя хранимые процедуры но не использовал подход MVC, потому что даывно не использую этот подъод, но ели надо без проблем реализую его в течении нескольких дней. Что касается WinForms, с ним никогда не работал но думаю что за неделю реализовать в приметивно виде смогу.", slideUrl: "/UISs/task/content/Test4a-22.png", attachedFile: "/sql/Test4a-22.sql" }]
    ]);

    var taskM = tasklist.get(id)

    let tTBox = new TTBox("", taskM.title, taskM.task, taskM.slideUrl, taskM.attachedFile, taskM.answer)
    tTBox.push(document.getElementsByTagName("main")[0], "afterbegin");
    lastVerticalId = tTBox.Id

    var nextPage = id + 1
    var nextPageUrl = "/task/" + nextPage
    if(nextPage > 22) nextPageUrl = "/books"
    

    let buttonBox = new ButtonBox("", "NEXT", nextPageUrl)
    buttonBox.push(lastVerticalId);
    lastVerticalId = buttonBox.Id
}